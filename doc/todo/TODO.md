# TODO å’Œ FIXME ä»»åŠ¡æ¸…å•

æœ¬æ–‡æ¡£æ•´ç†äº†é¡¹ç›®ä¸­æ‰€æœ‰çš„ TODO å’Œ FIXME é¡¹ç›®ï¼ŒæŒ‰ç…§æ¨¡å—å’Œä¼˜å…ˆçº§è¿›è¡Œåˆ†ç±»ã€‚

## ğŸš¨ é«˜ä¼˜å…ˆçº§ (FIXME)

### æ¸²æŸ“ç³»ç»Ÿ
- **`truvis-render/src/app.rs:236`** - ImGui äº‹ä»¶å¤„ç†
  - é—®é¢˜ï¼šåº”è¯¥æ¥æ”¶ imgui çš„äº‹ä»¶ï¼Œä½†å½“å‰æ²¡æœ‰æ­£ç¡®å¤„ç†
  - å½±å“ï¼šGUI äº¤äº’å¯èƒ½å­˜åœ¨é—®é¢˜

### RHI ç³»ç»Ÿ  
- **`truvis-rhi/src/core/resources/texture.rs:18`** - UUID ä½¿ç”¨
  - é—®é¢˜ï¼šå°† uuid ä½¿ç”¨èµ·æ¥ï¼Œå½“å‰æœªå¯ç”¨
  - å½±å“ï¼šçº¹ç†èµ„æºç®¡ç†å¯èƒ½ç¼ºä¹å”¯ä¸€æ ‡è¯†

### ç€è‰²å™¨ç³»ç»Ÿ
- **`shader/include/light.slangi:29`** - å…‰ç…§è¡°å‡è®¡ç®—
  - é—®é¢˜ï¼šå…‰ç…§è¡°å‡è®¡ç®—éœ€è¦ä¿®å¤
  - å½±å“ï¼šå…‰ç…§æ•ˆæœå¯èƒ½ä¸æ­£ç¡®

## ğŸ“‹ åŠŸèƒ½å®ç° (TODO)

### æ¸²æŸ“ç®¡çº¿ä¼˜åŒ–

#### GPU åœºæ™¯ç®¡ç† (`truvis-render/src/renderer/gpu_scene.rs`)
- **Line 321** - èšå…‰ç¯æ”¯æŒï¼šå½“å‰ spot_lights å­—æ®µæš‚æ—¶æ— ç”¨ï¼Œéœ€è¦å®ç°èšå…‰ç¯åŠŸèƒ½
- **Line 323** - èšå…‰ç¯æ•°é‡ï¼šspot_light_count å­—æ®µæš‚æ—¶æ— ç”¨  
- **Line 384** - é—´æ¥ç´¢å¼•ç¼“å†²åŒºä¼˜åŒ–ï¼šå¯¹äº mesh æ¥è¯´ï¼Œå¯èƒ½ä¸éœ€è¦é—´æ¥çš„ç´¢å¼• bufferï¼Œå› ä¸º mesh åœ¨ geometry buffer ä¸­æ˜¯è¿ç»­çš„
- **Line 520** - Hit Group å¤šæ ·åŒ–ï¼šæš‚æ—¶ä½¿ç”¨åŒä¸€ä¸ª hit groupï¼Œéœ€è¦æ”¯æŒä¸åŒçš„ hit group
- **Line 545** - è‡ªå®šä¹‰ç´¢å¼•ä¼˜åŒ–ï¼šæš‚æ—¶å°† instance çš„ index ä½œä¸º custom indexï¼Œéœ€è¦æ›´å¥½çš„ç´¢å¼•ç­–ç•¥

#### æ¸²æŸ“å™¨æ ¸å¿ƒ (`truvis-render/src/renderer/renderer.rs`)
- **Line 47** - Buffer é‡æ„ï¼šä¼˜åŒ– buffer ä½ç½®ï¼Œä¸è¯¥æ”¾åœ¨å½“å‰ä½ç½®

#### äº¤æ¢é“¾ç®¡ç† (`truvis-render/src/renderer/swapchain.rs`)
- **Line 229** - Suboptimal é—®é¢˜ï¼šè§£å†³ suboptimal çš„é—®é¢˜ï¼Œæå‡æ¸²æŸ“è´¨é‡

### åº”ç”¨ç¨‹åºæ¡†æ¶

#### ä¸»åº”ç”¨ (`truvis-render/src/app.rs`)
- **Line 212** - äº‹ä»¶å‘é€æ—¶æœºï¼šç¡®è®¤ä¸€ä¸‹å‘é€æ—¶æœº
- **Line 213** - Timer æ›´æ–°ï¼šå¯ä»¥åœ¨æ­¤å¤„æ›´æ–° timer
- **Line 227** - ç”¨æˆ·äº‹ä»¶å¤„ç†ï¼šuser_event å‡½æ•°æœªå®ç° (`todo!()`)
- **Line 251** - é‡ç»˜å¾ªç¯ï¼šæ˜¯å¦åº”è¯¥æ‰‹åŠ¨è°ƒç”¨ redrawï¼Œå®ç°æ­»å¾ªç¯ï¼Ÿ

### GUI ç³»ç»Ÿ

#### GUI æ¸²æŸ“é€šé“ (`truvis-render/src/gui/gui_pass.rs`)
- **Line 75** - æ·±åº¦ç¼“å†²ï¼šè¿™é‡Œä¸åº”è¯¥æœ‰ depth
- **Line 96** - Mesh ç®¡ç†ï¼šmesh åº”è¯¥æ”¾åœ¨ gui pass ä¸­ç®¡ç†

### RHI ç³»ç»Ÿä¼˜åŒ–

#### èµ„æºç®¡ç†
- **`truvis-rhi/src/resources/managed_image.rs:122`** - Buffer åˆ›å»ºä¼˜åŒ–ï¼šä½¿ç”¨æ–°çš„ Buffer åˆ›å»ºæ–¹å¼æ¥ä¼˜åŒ–ä»£ç 
- **`truvis-rhi/src/core/resources/special_buffers/structured_buffer.rs:48`** - Flag ä¼˜åŒ–ï¼šæˆ–è®¸å¯ä»¥ä¼˜åŒ–è¿™ä¸ª flag
- **`truvis-rhi/src/core/resources/special_buffers/structured_buffer.rs:63`** - å¯¹é½ä¼˜åŒ–ï¼šå¯èƒ½ä¸éœ€è¦è¿™ä¸ª align

### ç€è‰²å™¨ç³»ç»Ÿ

#### åå¤„ç† (`shader/src/pass/pp/sdr.slang`)
- **Line 19** - éšæœºæ€§å¢å¼ºï¼šå¼•å…¥ accum frame çš„å‚æ•°ï¼Œå¢åŠ éšæœºæ€§

#### PBR æ¸²æŸ“ (`shader/include/pbr.slangi`)
- **Line 118** - æœªå®ŒæˆåŠŸèƒ½ï¼šæœ‰æœªå®ç°çš„åŠŸèƒ½ï¼ˆæ³¨é‡Šä»…ä¸º "TODO"ï¼‰

#### ShaderToy å®ç°
- **`shader/src/shadertoy-glsl/works/corner_box.glsl:331`** - é€šç”¨åŒ–æ”¹è¿›ï¼šä½¿å…‰çº¿æ–¹å‘æ›´é€šç”¨åŒ–
- **`shader/src/shadertoy-glsl/works/corner_box.glsl:348`** - é‡è¦æ€§é‡‡æ ·ï¼šåœ¨æ¼«åå°„å’Œé•œé¢åå°„ä¸Šå®ç°å¤šé‡è¦æ€§é‡‡æ ·
- **`shader/src/shadertoy-glsl/works/chainsaw_man_power.glsl:164`** - ä»£ç æ¸…ç†ï¼šæ¸…ç†ç›¸å…³ä»£ç  (`rb?!?!?!?!?`)
- **`shader/src/shadertoy-glsl/works/chainsaw_man_power.glsl:645`** - é¢œè‰²ä¸€è‡´æ€§ï¼šåº”è¯¥ä¸å¤´éƒ¨é˜´å½±ä½¿ç”¨ç›¸åŒé¢œè‰²

### C++ é›†æˆ

#### Assimp é›†æˆ (`truvis-cxx/src/lib.rs`)
- **Line 13** - SoA é‡æ„ï¼šä½¿ç”¨ SoA (Structure of Arrays) æ¥ç®€åŒ–ï¼Œå°±å¯ä»¥ç§»é™¤è¿™äº›ä»£ç 

## ğŸ“Š ä¼˜å…ˆçº§å»ºè®®

### ğŸ”¥ ç«‹å³å¤„ç†
1. ImGui äº‹ä»¶å¤„ç† (å½±å“ç”¨æˆ·äº¤äº’)
2. å…‰ç…§è¡°å‡è®¡ç®—ä¿®å¤ (å½±å“æ¸²æŸ“è´¨é‡)
3. ç”¨æˆ·äº‹ä»¶å¤„ç†å®ç° (åŠŸèƒ½ç¼ºå¤±)

### âš¡ çŸ­æœŸå¤„ç†
1. GPU åœºæ™¯ç®¡ç†ä¼˜åŒ–
2. Buffer ä½ç½®é‡æ„
3. GUI ç³»ç»Ÿå®Œå–„
4. äº¤æ¢é“¾ suboptimal é—®é¢˜

### ğŸ”§ ä¸­æœŸå¤„ç†
1. èšå…‰ç¯åŠŸèƒ½å®ç°
2. RHI ç³»ç»Ÿä¼˜åŒ–
3. ç€è‰²å™¨åŠŸèƒ½å®Œå–„
4. C++ é›†æˆé‡æ„

### ğŸ“ˆ é•¿æœŸå¤„ç†
1. ShaderToy åŠŸèƒ½å¢å¼º
2. æ¸²æŸ“ç®¡çº¿æ•´ä½“ä¼˜åŒ–
3. æ€§èƒ½ä¼˜åŒ–ç›¸å…³é¡¹ç›®

## ğŸ“ å¤‡æ³¨

- æœ¬æ–‡æ¡£åŸºäºä»£ç åˆ†æç”Ÿæˆï¼Œå»ºè®®å®šæœŸæ›´æ–°
- ä¼˜å…ˆçº§è¯„ä¼°åŸºäºåŠŸèƒ½å½±å“èŒƒå›´å’Œç”¨æˆ·ä½“éªŒ
- å»ºè®®åœ¨å¤„ç†æ¯ä¸ª TODO åæ›´æ–°ç›¸åº”çš„æ–‡æ¡£å’Œæµ‹è¯•
- æŸäº› TODO å¯èƒ½éœ€è¦æ¶æ„å±‚é¢çš„è®¨è®ºæ‰èƒ½ç¡®å®šæœ€ä½³å®ç°æ–¹æ¡ˆ

---
*æœ€åæ›´æ–°ï¼š2025å¹´8æœˆ26æ—¥*
